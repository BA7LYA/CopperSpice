list(APPEND GUI_PUBLIC_INCLUDES
   QBitmap
   QIcon
   QIconEngine
   QIconEngineFactoryInterface
   QIconEnginePlugin
   QIconSet
   QImage
   QImageIOHandler
   QImageIOHandlerFactoryInterface
   QImageIOPlugin
   QImageReader
   QImageTextKeyLang
   QImageWriter
   QMovie
   QPicture
   QPictureFormatInterface
   QPictureFormatPlugin
   QPictureIO
   QPixmap
   QPixmapCache
)

list(APPEND GUI_INCLUDES
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qbitmap.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qicon.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qiconengine.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qiconenginefactoryinterface.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qiconengineplugin.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qiconset.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qimage.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qimageiohandler.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qimageiohandlerfactoryinterface.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qimageioplugin.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qimagereader.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qimagetextkeylang.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qimagewriter.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qmovie.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpicture.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpictureformatinterface.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpictureformatplugin.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpictureio.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpixmap.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpixmapcache.h
)

list(APPEND GUI_PRIVATE_INCLUDES
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qbmphandler_p.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qicohandler_p.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qicon_p.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qiconloader_p.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qimage_p.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qimagepixmapcleanuphooks_p.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qjpeghandler_p.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qnativeimage_p.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qgifhandler_p.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpaintengine_pic_p.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpicture_p.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpixmap_blitter_p.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpixmap_raster_p.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpixmapcache_p.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpixmapfilter_p.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpnghandler_p.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qppmhandler_p.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qtiffhandler_p.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qxbmhandler_p.h
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qxpmhandler_p.h
)

target_sources(CsGui
   PRIVATE
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qbmphandler.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qbitmap.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qicon.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qiconloader.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qimage.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qimage_sse2.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qimage_ssse3.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qimageiohandler.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qimagereader.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qimagewriter.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpaintengine_pic.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpicture.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpictureformatplugin.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpixmap.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpixmapcache.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpixmapfilter.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qiconengine.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qiconengineplugin.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qmovie.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpixmap_raster.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpixmap_blitter.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qnativeimage.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qimagepixmapcleanuphooks.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qgifhandler.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qicohandler.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qpnghandler.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qjpeghandler.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qxpmhandler.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qxbmhandler.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qppmhandler.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qtiffhandler.cpp
   ${CMAKE_CURRENT_SOURCE_DIR}/image/qimage_conversions.cpp

   ${PROJECT_SOURCE_DIR}/src/3rdparty/libmng/libmng_callback_xs.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libmng/libmng_chunk_descr.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libmng/libmng_chunk_io.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libmng/libmng_chunk_prc.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libmng/libmng_chunk_xs.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libmng/libmng_cms.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libmng/libmng_display.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libmng/libmng_dither.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libmng/libmng_error.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libmng/libmng_filter.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libmng/libmng_hlapi.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libmng/libmng_jpeg.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libmng/libmng_object_prc.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libmng/libmng_pixels.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libmng/libmng_prop_xs.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libmng/libmng_read.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libmng/libmng_trace.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libmng/libmng_write.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libmng/libmng_zlib.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libpng/png.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libpng/pngerror.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libpng/pngget.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libpng/pngmem.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libpng/pngpread.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libpng/pngread.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libpng/pngrio.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libpng/pngrtran.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libpng/pngrutil.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libpng/pngset.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libpng/pngtrans.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libpng/pngwio.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libpng/pngwrite.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libpng/pngwtran.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libpng/pngwutil.c

   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_aux.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_close.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_codec.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_color.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_compress.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_dir.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_dirinfo.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_dirread.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_dirwrite.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_dumpmode.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_error.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_extension.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_fax3.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_fax3sm.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_flush.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_getimage.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_luv.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_lzw.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_next.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_open.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_packbits.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_pixarlog.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_predict.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_print.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_read.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_strip.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_swab.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_thunder.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_tile.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_version.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_warning.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_write.c
   ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_zip.c
)

if (NOT ${JPEG_FOUND})
   target_sources(CsGui
      PRIVATE
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jaricom.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jcapimin.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jcapistd.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jcarith.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jccoefct.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jccolor.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jcdctmgr.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jchuff.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jcinit.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jcmainct.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jcmarker.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jcmaster.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jcomapi.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jcparam.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jcprepct.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jcsample.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jctrans.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jdapimin.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jdapistd.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jdarith.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jdatadst.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jdatasrc.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jdcoefct.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jdcolor.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jddctmgr.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jdhuff.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jdinput.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jdmainct.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jdmarker.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jdmaster.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jdmerge.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jdpostct.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jdsample.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jdtrans.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jerror.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jfdctflt.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jfdctfst.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jfdctint.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jidctflt.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jidctfst.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jidctint.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jmemmgr.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jmemnobs.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jquant1.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jquant2.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libjpeg/jutils.c
   )
endif()

if(CMAKE_SYSTEM_PROCESSOR MATCHES "arm")
   target_sources(CsGui
      PRIVATE
      ${CMAKE_CURRENT_SOURCE_DIR}/image/qimage_neon.cpp

      ${PROJECT_SOURCE_DIR}/src/3rdparty/libpng/arm/arm_init.c
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libpng/arm/filter_neon.S
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libpng/arm/filter_neon_intrinsics.c
   )
endif()

if(CMAKE_SYSTEM_NAME MATCHES "Windows")
   target_sources(CsGui
      PRIVATE
      ${CMAKE_CURRENT_SOURCE_DIR}/image/qpixmap_win.cpp
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_win32.c
   )

else()
   target_sources(CsGui
      PRIVATE
      ${PROJECT_SOURCE_DIR}/src/3rdparty/libtiff/libtiff/tif_unix.c
    )
endif()

